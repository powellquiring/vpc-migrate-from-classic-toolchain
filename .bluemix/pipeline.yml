---
defaultBaseImageVersion: latest
private_worker:
  workerType: public
  workerId: public
  workerName: ''

properties:
- name: PREFIX
  value: "{{toolchain.name}}"
  type: text
- name: VPC_IMAGE_NAME
  value: "centos-7-plus"
  type: text
- name: DATACENTER
  value: "dal13"
  type: text
- name: RESOURCE_GROUP_NAME
  value: "default"
  type: text
- name: COS_SERVICE_NAME
  value: "${PREFIX}-cos"
  type: text
- name: COS_SERVICE_PLAN
  value: "standard"
  type: text
- name: COS_REGION
  value: "us-south"
  type: text
- name: COS_BUCKET_NAME
  value: "${PREFIX}-images"
  type: text
- name: IBMCLOUD_API_KEY
  value: "${API_KEY}"
  type: text

stages:
- name: MyStage
  worker: Worker[name=null,type=null,id=null]
  inputs:
  - type: git
    branch: master
    service: ${REPO}
  triggers:
  - type: stage
  permission:
    execute: TOOLCHAIN_ADMINS
  jobs:
  - name: Build
    type: builder
    curatedDockerImage: default
    artifact_dir: ''

hooks:
- enabled: true
  label: null
  ssl_enabled: true
  url: https://devops-api.us-south.devops.cloud.ibm.com/v1/messaging/webhook/publish

